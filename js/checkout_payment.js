"use strict";
require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","common"],function(e,r,s,a,t){function o(){t.dao.paymentinfo({type:1,orderId:w},function(e){e&&i(e)},null,function(){c(w)})}function i(r){console.log("initPaymentMethodLayout");var s=r.channels;b=r.mdis;for(var a=0;a<s.length;a++){var o=s[a];2==o.extP4?y=o.channelId:1==o.extP4&&(x=o.channelId,o.MDisEnable=b.enabled)}if(e("#payment_method_list").html(e("#payMethodItemTempl").tmpl(s)),y)e("#"+y).attr("checked",!0),e("#bank_list_wrap").removeClass("hide"),e("#payment_card_wrap").addClass("hide"),e("#billing_address_wrap").addClass("hide"),e("#debit_card_label").text(e.i18n.map.DebitCard);else if(b.enabled&&1==b.enabled){if(e("#"+x+"_M_card").attr("checked",!0),e("#master_card").text(e.i18n.map.MASTERCARD),e("#visa_card").text(e.i18n.map.VISACARD),e("#m_card_dis_hint").text(b.mTitle),e("#error_card_number").text(e.i18n.map.CardNumErrorMsgM),e("#card_image").addClass("hide"),e("#card_no_input").css("background","url(../resources/img/m2.jpg) right center no-repeat"),t.util.isMobile()?e("#card_no_input").css("background-position-x","400px"):e("#card_no_input").css("background-position-x","260px"),e("#m_card_dis_info").removeClass("hide"),e("#card_dis_title").text(b.mDisLable),e("#card_dis_total").text(b.mDisVal),e("#sub_total_wrap").removeClass("hide"),e("#grand_total").text(b.totalAfterMDis),e("#payment_btn span").html(e.i18n.map.PayNow+" ("+b.totalAfterMDis+")"),e("#mobile_payment_btn span").html(e.i18n.map.PayNow+" ("+b.totalAfterMDis+")"),g){var i=t.util.getCurrencySymbol(g.correncyCode);i||(i=t.util.getCurrencySymbol(t.util.getLocalCurrency())),e("#sub_total").text(t.util.formatProductPrice(g.realCost,i))}e("#bank_list_wrap").addClass("hide"),e("#payment_card_wrap").removeClass("hide"),e("#billing_address_wrap").removeClass("hide")}else e("#"+x).attr("checked",!0),e("#credit_card_label").text(e.i18n.map.CreditCard),e("#card_image").removeClass("hide"),e("#m_card_dis_info").addClass("hide"),e("#sub_total_wrap").addClass("hide"),e("#bank_list_wrap").addClass("hide"),e("#payment_card_wrap").removeClass("hide"),e("#billing_address_wrap").removeClass("hide");e("input[type=radio][name=payment_channel]").change(function(){if(this.value==y)e("#bank_list_wrap").removeClass("hide"),e("#payment_card_wrap").addClass("hide"),e("#billing_address_wrap").addClass("hide");else if(this.value==x)e("#bank_list_wrap").addClass("hide"),e("#payment_card_wrap").removeClass("hide"),e("#billing_address_wrap").removeClass("hide"),e("#card_no_input").css("background","none");else if(this.value==x+"_1"){if(e("#bank_list_wrap").addClass("hide"),e("#payment_card_wrap").removeClass("hide"),e("#billing_address_wrap").removeClass("hide"),e("#card_dis_total").text(b.mDisVal),e("#sub_total_wrap").removeClass("hide"),e("#grand_total").text(b.totalAfterMDis),e("#payment_btn span").html(e.i18n.map.PayNow+" ("+b.totalAfterMDis+")"),e("#mobile_payment_btn span").html(e.i18n.map.PayNow+" ("+b.totalAfterMDis+")"),g){var r=t.util.getCurrencySymbol(g.correncyCode);r||(r=t.util.getCurrencySymbol(t.util.getLocalCurrency())),e("#sub_total").text(t.util.formatProductPrice(g.realCost,r))}e("#m_card_dis_info").removeClass("hide"),e("#card_no_input").css("background","url(../resources/img/m2.jpg) right center no-repeat"),t.util.isMobile()?e("#card_no_input").css("background-position-x","400px"):e("#card_no_input").css("background-position-x","260px"),n()}else if(this.value==x+"_2"){if(e("#bank_list_wrap").addClass("hide"),e("#payment_card_wrap").removeClass("hide"),e("#billing_address_wrap").removeClass("hide"),g){var r=t.util.getCurrencySymbol(g.correncyCode);r||(r=t.util.getCurrencySymbol(t.util.getLocalCurrency())),e("#sub_total").text(t.util.formatProductPrice(g.realCost,r)),e("#grand_total").text(t.util.formatProductPrice(g.realCost,r)),e("#payment_btn span").html(e.i18n.map.PayNow+" ("+t.util.formatProductPrice(g.realCost,r)+")"),e("#mobile_payment_btn span").html(e.i18n.map.PayNow+" ("+t.util.formatProductPrice(g.realCost,r)+")"),e("#card_dis_total").text("-"+t.util.formatProductPrice(0,r)),e("#sub_total_wrap").removeClass("hide")}e("#m_card_dis_info").removeClass("hide"),e("#card_no_input").css("background","url(../resources/img/v2.jpg) right center no-repeat"),t.util.isMobile()?e("#card_no_input").css("background-position-x","400px"):e("#card_no_input").css("background-position-x","260px"),n()}})}function d(r){var s=P[r.currencyName];s&&s.length>0&&y?(e("#"+y).attr("disabled",!1),e("#debit_error_msg").addClass("hide"),e("#"+y).attr("checked",!0),e("#"+x).attr("checked",!1),e("#bank_list_wrap").removeClass("hide"),e("#bank_list_wrap").html(e("#bankItemTempl").tmpl(s)),e("#bank_list_wrap .bank-item-wrap").bind("click",function(){e("#error_message").hide(),e("#bank_list_wrap .bank-item-wrap img").removeClass("selected"),e(this).find("img").addClass("selected"),I=s[e(this).data().data]})):(e("#"+y).attr("disabled",!0),e("#debit_error_msg").removeClass("hide"),e("#bank_list_wrap").addClass("hide"),e("#"+y).attr("checked",!1),e("#"+x).attr("checked",!0),e("#payment_card_wrap").removeClass("hide"),e("#billing_address_wrap").removeClass("hide"))}function n(){var r=e("input[name='payment_channel']:checked").val();if(r==x+"_1"){e("#error_card_number").text(e.i18n.map.CardNumErrorMsgM);var s=e("#card_no_input").val(),a=new RegExp("^[5]");s&&a.test(s)?(e("#card_no_input").addClass("has-success"),e("#card_no_input").removeClass("has-error"),e("#error_card_number").removeClass("show-error-text")):s&&(e("#card_no_input").removeClass("has-success"),e("#card_no_input").addClass("has-error"),e("#error_card_number").addClass("show-error-text"),e("#error_card_number").text(e.i18n.map.CardNumErrorMsgM))}else if(r==x+"_2"){e("#error_card_number").text(e.i18n.map.CardNumErrorMsgV);var s=e("#card_no_input").val(),a=new RegExp("^[4]");s&&a.test(s)?(e("#card_no_input").addClass("has-success"),e("#card_no_input").removeClass("has-error"),e("#error_card_number").removeClass("show-error-text")):s&&(e("#card_no_input").removeClass("has-success"),e("#card_no_input").addClass("has-error"),e("#error_card_number").addClass("show-error-text"),e("#error_card_number").text(e.i18n.map.CardNumErrorMsgV))}}function l(){t.dao.getUserAddress({userId:t.util.getUserId(),addrType:2},function(r){var s=r;if(s&&s.length>0){for(var a=0;a<s.length;a++){var t=s[a];t.addrId==f&&e("#shipping_addr_dt").text(t.streetAddr+" "+t.extendAddr+" "+t.city+", "+t.province+", "+t.fullCountry+", "+t.postCode),t.isBillAddr&&(v=t,e("#billing_addr_dt").text(v.streetAddr+" "+v.extendAddr+" "+v.city+", "+v.province+", "+v.fullCountry+", "+v.postCode))}e("#first_name_input").val(v.recFirstname),e("#last_name_input").val(v.recLastname),e("#address_input").val(v.streetAddr),e("#address_2_input").val(v.extendAddr),e("#city_input").val(v.city),e("#postal_code_input").val(v.postCode),e("#email_input").val(v.email),e("#phone_input").val(v.telephone),e("#phone_2_input").val(v.telephone1)}_()})}function c(r){t.dao.getOrderDetail({orderId:r},function(r){if(r){g=r;var s=t.util.getCurrencySymbol(r.correncyCode);s||(s=t.util.getCurrencySymbol(t.util.getLocalCurrency()));for(var a=r.orderDisInfos,o=0;o<a.length;o++){var i=a[o];i.disCost<0?i.disCost="-"+t.util.formatProductPrice(-i.disCost,s):i.disCost="+"+t.util.formatProductPrice(i.disCost,s)}e("#dis_info_list").html(e("#disInfoTempl").tmpl(a)),e("#cart_total").html(t.util.formatProductPrice(r.totalCost,s)),b&&1==b.enabled?(e("#grand_total").text(b.totalAfterMDis),e("#sub_total").text(t.util.formatProductPrice(r.realCost,s)),e("#payment_btn span").html(e.i18n.map.PayNow+" ("+b.totalAfterMDis+")"),e("#mobile_payment_btn span").html(e.i18n.map.PayNow+" ("+b.totalAfterMDis+")")):(e("#grand_total").html(t.util.formatProductPrice(r.realCost,s)),e("#payment_btn span").html(e.i18n.map.PayNow+" ("+t.util.formatProductPrice(r.realCost,s)+")"),e("#mobile_payment_btn span").html(e.i18n.map.PayNow+" ("+t.util.formatProductPrice(r.realCost,s)+")"));var n=r.shippingAddr;e("#shipping_addr_dt").text(n.streetAddr+" "+n.extendAddr+" "+n.city+", "+n.province+", "+n.fullCountry+", "+n.postCode),v=r.billAddr,e("#billing_addr_dt").text(v.streetAddr+" "+v.extendAddr+" "+v.city+", "+v.province+", "+v.fullCountry+", "+v.postCode),e("#first_name_input").val(v.recFirstname),e("#last_name_input").val(v.recLastname),e("#address_input").val(v.streetAddr),e("#address_2_input").val(v.extendAddr),e("#city_input").val(v.city),e("#postal_code_input").val(v.postCode),e("#email_input").val(v.email),e("#phone_input").val(v.telephone),e("#phone_2_input").val(v.telephone1),_(),v||(f=r.addrId,l()),d(s)}})}function _(){var r=document.getElementById("countryList");C=v?v.country:r.options[0].value,e("#countryList option[value='"+C+"']").prop("selected","selected"),e.getJSON("/resources/json/country.json",function(s){k=s;var a=r.value;console.log(a);for(var t=0,o=0;o<s.length;o++){if(s[o].code===a){t=o;break}}if(s&&s[t]&&s[t].state&&s[t].state.length>0)u(s[t].state,!0),e("#provice_selected_wrap").show(),e("#provice_input_wrap").hide();else{document.getElementById("provinceList").length=0,e("#provice_selected_wrap").hide(),e("#provice_input_wrap").show()}e("#countryList").on("change",function(){var a=e(this).find("option:selected").val();C=a;var t=r.selectedIndex;if(s&&s[t]&&s[t].state&&s[t].state.length>0)u(s[t].state),e("#provice_selected_wrap").show(),e("#provice_input_wrap").hide();else{document.getElementById("provinceList").length=0,e("#provice_selected_wrap").hide(),e("#provice_input_wrap").show()}})})}function u(r,s){if(r&&r.length>0){e("#provice_selected_wrap").show(),e("#provice_input_wrap").hide();var a=r;document.getElementById("provinceList").length=0;for(var t=0;t<a.length;t++){var o="<option value='"+a[t]+"'>"+a[t]+"</option>";s&&v&&v.province==a[t]&&(o="<option value='"+a[t]+"' selected>"+a[t]+"</option>"),e("#provinceList").append(o)}}else e("#provice_selected_wrap").hide(),e("#provice_input_wrap").show(),v&&e("#province_input").val(v.province)}function p(r,s){return!e(r).hasClass("has-error")&&""!==e(r).val().trim()||(e(this).removeClass("has-success"),e(this).addClass("has-error"),e(s).addClass("show-error-text"),!1)}function h(){var r={cardNo:e("#card_no_input").val(),expireY:e("#year_list").val(),expireM:e("#month_list").val(),secCode:e("#cvv_input").val()},s={os:t.util.getOS(),browerlang:t.util.getBrowserLang(),brower:t.util.getBrowser(),timezone:t.util.getTimezone(),screen:t.util.getResolution(),ismobile:t.util.isMobile()?"1":"0"},a="",o="",i=t.util.getAdvSource();i&&(a=i.t,o=i.u);var d=e("input[name='payment_channel']:checked").val();d!=x+"_1"&&d!=x+"_2"||(d=x);var n={};n=a&&"null"!==a&&"undefined"!==a?{userId:t.util.getUserId(),currencyId:t.util.getLocalCurrency(),orderId:w,billAddrId:v.addrId,channelId:d,card:r,adsType:a,adsAccount:o,clientInfo:s,newUrl:"1"}:{userId:t.util.getUserId(),currencyId:t.util.getLocalCurrency(),orderId:w,billAddrId:v.addrId,channelId:d,card:r,adsAccount:o,clientInfo:s,newUrl:"1"},d==y?(n.billAddrId="",n.card={},n.banckCode=I.bankCode,n.banckPrdCode=I.code,e("#loading_hint").removeClass("hide")):e("#loading_hint").addClass("hide"),e(".loading-mask").removeClass("hide"),e("#error_message").hide(),e("#payment_btn").attr("disabled",!0),t.dao.payment({inputParams:JSON.stringify(n)},function(r){if(d==y){var s=r;e("body").append(s);document.getElementsByName("SendForm")[0].submit(),e(".loading-mask").addClass("hide"),e("#payment_btn").attr("disabled",!1)}else e(".loading-mask").addClass("hide"),e("#payment_btn").attr("disabled",!1),window.location.href="../../../payment_result.html?result=1&odi="+w},function(r){e(".loading-mask").addClass("hide"),e("#payment_btn").attr("disabled",!1),d==x?"EC1004"==r.code||"EC1005"==r.code||"EC1006"==r.code?window.location.href="../../../payment_result.html?result=0&failCode="+r.code+"&failMsg="+encodeURIComponent(r.msg):"EC1007"==r.code?window.location.href=r.data:(e("#error_message").html(r.msg),e("#error_message").show()):window.location.href="../../../payment_result.html?result=0&failCode=EC1005"},function(){e("#card_no_input").val(""),e("#cvv_input").val("")})}function m(e){if(k)for(var r=0;r<k.length;r++){var s=k[r];if(s.code==e)return s.name}return e}var v,C,f,g,b,w=t.util.getQueryString("orderId"),y="",x="",k=null,P={MYR:[{name:"Maybank",bankCode:"FPXD_MB2U0227",code:"25",img:"maybank.png"},{name:"CIMB",bankCode:"FPXD_BCBB0235",code:"25",img:"CIMBBank.png"},{name:"Public Bank",bankCode:"FPXD_PBB0233",code:"25",img:"PublicBankBerhad.png"},{name:"RHB",bankCode:"FPXD_RHB0218",code:"25",img:"RHBBank.png"},{name:"Hong Leong Bank",bankCode:"FPXD_HLB0224",code:"25",img:"HongLeongBank.png"},{name:"Bank Islam",bankCode:"FPXD_BIMB0340",code:"25",img:"BankIslam.png"}],THB:[{name:"United oversea Bank",bankCode:"FPXD_UOB0226",code:"27",img:"UnitedOverseasBank.png"}]},I=null;t.initLoginStatus(function(e){e?o():window.location.href="../../../login.html"}),e("#order_no_dt").text(w),e("#card_no_input").val(""),e("#cvv_input").val(""),function(){e("#payment_btn, #mobile_payment_btn").click(function(){var r=!0,s=e("input[name='payment_channel']:checked").val();if(s==x||s==x+"_1"||s==x+"_2"){var a=p("#card_no_input","#error_card_number");r&&((r=a&&r)||(e("#card_no_input").focus(),setTimeout(function(){s==x?alert(e.i18n.map.CardNumErrorMsg):s==x+"_1"?alert(e.i18n.map.CardNumErrorMsgM):alert(e.i18n.map.CardNumErrorMsgV)},100))),e("#month_list").find("option:selected").text()==e.i18n.map.Month?(setTimeout(function(){alert(e.i18n.map.MonthYearErrorMsg)},100),r=!1,e("#month_list").focus(),e("#error_card_date").addClass("show-error-text")):e("#error_card_date").removeClass("show-error-text"),e("#year_list").find("option:selected").text()==e.i18n.map.Year?(r&&setTimeout(function(){alert(e.i18n.map.MonthYearErrorMsg)},100),r=!1,e("#year_list").focus(),e("#error_card_date").addClass("show-error-text")):e("#error_card_date").removeClass("show-error-text");var t=p("#cvv_input","#error_cvv");r&&((r=t&&r)||(e("#cvv_input").focus(),setTimeout(function(){alert(e.i18n.map.CvvErrorMsg)},100)))}else s==y&&(I||(r=!1,e("#error_message").html("Please select bank!"),e("#error_message").show(),setTimeout(function(){alert("Please select bank!")},1)));r&&h()}),e("#what_cvv_btn").click(function(){e("#cvv_desc_wrap").removeClass("hide")}),e("#close_btn").click(function(){e("#cvv_desc_wrap").addClass("hide")}),e("#edit_credit_address").click(function(){e("#edit_shipping_address_wrap").removeClass("hide"),e("#cancel_credit_address").removeClass("hide"),e("#edit_credit_address").addClass("hide")}),e("#cancel_credit_address").click(function(){e("#edit_credit_address").removeClass("hide"),e("#edit_shipping_address_wrap").addClass("hide"),e("#cancel_credit_address").addClass("hide")}),e("#save_credit_address").click(function(){var r=!0,s=p("#first_name_input","#error_first_name");r&&((r=s&&r)||e("#first_name_input").focus());var a=p("#last_name_input","#error_last_name");r&&((r=a&&r)||e("#last_name_input").focus());var o=!0,i=t.util.checkAddress(e("#address_input").val());0==i?(e("#address_input").removeClass("has-success"),e("#address_input").addClass("has-error"),e("#error_address").addClass("show-error-text"),o=!1):-1==i?(e("#address_input").removeClass("has-success"),e("#address_input").addClass("has-error"),e("#error_address").addClass("show-error-text"),o=!1):1==i&&(e("#address_input").removeClass("has-error"),e("#address_input").addClass("has-success"),e("#error_address").removeClass("show-error-text")),r&&((r=o&&r)||e("#address_input").focus()),o=!0,i=t.util.checkAddress(e("#address_2_input").val()),-1==i?(e("#address_2_input").removeClass("has-success"),e("#address_2_input").addClass("has-error"),e("#error_address_2").addClass("show-error-text"),o=!1):(e("#address_2_input").removeClass("has-error"),e("#address_2_input").addClass("has-success"),e("#error_address_2").removeClass("show-error-text")),r&&((r=o&&r)||e("#address_2_input").focus());var d=p("#city_input","#error_city");r&&((r=d&&r)||e("#city_input").focus());var n=p("#postal_code_input","#error_postal_code");r&&((r=n&&r)||e("#postal_code_input").focus());var c=p("#email_input","#error_email");r&&((r=c&&r)||e("#email_input").focus());var _=p("#phone_input","#error_phone");if(r&&((r=_&&r)||e("#phone_input").focus()),e("#provice_input_wrap").is(":visible")){var u=p("#province_input","#error_province");r&&((r=u&&r)||e("#province_input").focus())}if(r){e(".loading-mask").removeClass("hide"),e("#save_credit_address").attr("disabled",!0);var h=e("#provinceList").val();e("#provice_input_wrap").is(":visible")&&(h=e("#province_input").val());var f={addrId:v.addrId,userId:t.util.getUserId(),country:C,fullCountry:m(C),province:h,city:e("#city_input").val(),streetAddr:e("#address_input").val(),extendAddr:e("#address_2_input").val(),email:e("#email_input").val().trim(),postCode:e("#postal_code_input").val(),telephone:e("#phone_input").val(),telephone1:e("#phone_2_input").val(),recFirstname:e("#first_name_input").val(),recLastname:e("#last_name_input").val(),isDefault:1,isBillAddr:1};t.dao.updateAddress({inputParams:JSON.stringify(f)},function(r){e("#edit_shipping_address_wrap").addClass("hide"),e("#edit_credit_address").removeClass("hide"),e("#cancel_credit_address").addClass("hide"),l()},null,function(r){e(".loading-mask").addClass("hide"),e("#save_credit_address").attr("disabled",!1)})}}),e("#cancel_btn").click(function(){e("#edit_credit_address").removeClass("hide"),e("#edit_shipping_address_wrap").addClass("hide"),e("#cancel_credit_address").addClass("hide")}),t.util.isMobile()&&e(window).scroll(function(){t.util.isElementInViewport(document.getElementById("payment_btn"))?e("#mobile_payment_btn").addClass("hide"):e("#mobile_payment_btn").removeClass("hide")})}(),function(){var r=sessionStorage.userInfo;r&&(r=JSON.parse(r)),e("#first_name_input").blur(function(){var r=t.util.checkNull(e(this).val());0==r?(e(this).removeClass("has-success"),e(this).addClass("has-error"),e("#error_first_name").addClass("show-error-text")):1==r&&(e(this).removeClass("has-error"),e(this).addClass("has-success"),e("#error_first_name").removeClass("show-error-text"))}),e("#last_name_input").blur(function(){var r=t.util.checkNull(e(this).val());0==r?(e(this).removeClass("has-success"),e(this).addClass("has-error"),e("#error_last_name").addClass("show-error-text")):1==r&&(e(this).removeClass("has-error"),e(this).addClass("has-success"),e("#error_last_name").removeClass("show-error-text"))}),e("#address_input").blur(function(){var r=t.util.checkAddress(e(this).val());0==r?(e(this).removeClass("has-success"),e(this).addClass("has-error"),e("#error_address").addClass("show-error-text")):-1==r?(e(this).removeClass("has-success"),e(this).addClass("has-error"),e("#error_address").addClass("show-error-text")):1==r&&(e(this).removeClass("has-error"),e(this).addClass("has-success"),e("#error_address").removeClass("show-error-text"))}),e("#address_2_input").blur(function(){-1==t.util.checkAddress(e(this).val())?(e(this).removeClass("has-success"),e(this).addClass("has-error"),e("#error_address_2").addClass("show-error-text")):(e(this).removeClass("has-error"),e(this).addClass("has-success"),e("#error_address_2").removeClass("show-error-text"))}),e("#city_input").blur(function(){var r=t.util.checkNull(e(this).val());0==r?(e(this).removeClass("has-success"),e(this).addClass("has-error"),e("#error_city").addClass("show-error-text")):1==r&&(e(this).removeClass("has-error"),e(this).addClass("has-success"),e("#error_city").removeClass("show-error-text"))}),e("#province_input").blur(function(){var r=t.util.checkNull(e(this).val());0==r?(e(this).removeClass("has-success"),e(this).addClass("has-error"),e("#error_province").addClass("show-error-text")):1==r&&(e(this).removeClass("has-error"),e(this).addClass("has-success"),e("#error_province").removeClass("show-error-text"))}),e("#postal_code_input").blur(function(){var r=t.util.checkPhone(e(this).val());0==r?(e(this).removeClass("has-success"),e(this).addClass("has-error"),e("#error_postal_code").addClass("show-error-text")):-1==r?(e(this).removeClass("has-success"),e(this).addClass("has-error"),e("#error_postal_code").addClass("show-error-text")):1==r&&(e(this).removeClass("has-error"),e(this).addClass("has-success"),e("#error_postal_code").removeClass("show-error-text"))}),e("#email_input").blur(function(){var r=t.util.checkEmail(e(this).val().trim());0==r?(e(this).removeClass("has-success"),e(this).addClass("has-error"),e("#error_email").addClass("show-error-text")):-1==r?(e(this).removeClass("has-success"),e(this).addClass("has-error"),e("#error_email").addClass("show-error-text")):1==r&&(e(this).removeClass("has-error"),e(this).addClass("has-success"),e("#error_email").removeClass("show-error-text"))}),e("#phone_input").blur(function(){var r=t.util.checkPhone(e(this).val());0==r?(e(this).removeClass("has-success"),e(this).addClass("has-error"),e("#error_phone").addClass("show-error-text")):-1==r?(e(this).removeClass("has-success"),e(this).addClass("has-error"),e("#error_phone").addClass("show-error-text")):1==r&&(e(this).removeClass("has-error"),e(this).addClass("has-success"),e("#error_phone").removeClass("show-error-text"))}),e("#card_no_input").blur(function(){var r=t.util.checkNull(e(this).val());0==r?(e(this).removeClass("has-success"),e(this).addClass("has-error"),e("#error_card_number").addClass("show-error-text")):1==r&&(e(this).removeClass("has-error"),e(this).addClass("has-success"),e("#error_card_number").removeClass("show-error-text"),e("#error_card_number").text(e.i18n.map.CardNumErrorMsg)),n()}),document.getElementById("card_no_input").addEventListener("input",function(e){n()}),e("#cvv_input").blur(function(){var r=t.util.checkNull(e(this).val());0==r?(e(this).removeClass("has-success"),e(this).addClass("has-error"),e("#error_cvv").addClass("show-error-text")):1==r&&(e(this).removeClass("has-error"),e(this).addClass("has-success"),e("#error_cvv").removeClass("show-error-text"))})}(),function(){for(var r=[e.i18n.map.Month,"01","02","03","04","05","06","07","08","09","10","11","12"],s=document.getElementById("month_list"),a=0;a<r.length;a++)s.add(new Option(r[a],r[a]));e("#month_list").on("change",function(){e("#month_list").find("option:selected").text()!==e.i18n.map.Month&&e("#year_list").find("option:selected").text()!==e.i18n.map.Year&&e("#error_card_date").removeClass("show-error-text")})}(),function(){for(var r=(new Date).getFullYear(),s=[e.i18n.map.Year],a=r;a<=r+10;a++)s.push(a);for(var t=document.getElementById("year_list"),a=0;a<s.length;a++)t.add(new Option(s[a],s[a])),e("#error_message").hide();e("#year_list").on("change",function(){e("#month_list").find("option:selected").text()!==e.i18n.map.Month&&e("#year_list").find("option:selected").text()!==e.i18n.map.Year&&e("#error_card_date").removeClass("show-error-text")})}(),e("#currency_group").hide()});