"use strict";
require.config(requireConfig),require(["jquery","tmpl","i18n","bootstrap","common","wall"],function(e,a,t,l,i,r){function o(){i.dao.listImgWall({currentPage:u.curPage,terminal:i.util.isMobile()?"2":"1",currencyId:i.util.getLocalCurrency()},function(a){if(a.page){if(1==u.curPage){u.amount=a.page.amount,u.pageSize=a.page.pageSize;var t=0;t=u.amount%u.pageSize==0?parseInt(u.amount/u.pageSize):parseInt(u.amount/u.pageSize)+1,u.totalPage=t}}else u.totalPage=0,u.amount=0;0==u.amount?e("#pic_wall_list_wrap").addClass("hide"):(e("#pic_wall_list_wrap").removeClass("hide"),1==u.curPage&&(r.init(document.getElementById("cells"),document.getElementById("picWallTempl").innerHTML),r.setCompleteCallback(function(){n(),u.curPage==u.totalPage&&e("#cell_loading").addClass("hide")}),r.delayedScroll(function(){!r.loadingData&&u.curPage<u.totalPage&&(u.curPage=u.curPage+1,e("#cell_loading").removeClass("hide"),r.loadData(o))})),r.loadingData=!0,r.concatData(c(a.imgs)))})}function c(e){for(var a=0;a<e.length;a++){var t=e[a];t.aiName=i.util.imgWallUrl+t.aiName,t&&t.aiHref?t.aiHref=t.aiHref:t.aiHref="javascript:void(0)";var l=i.util.getCurrencySymbol(i.util.getLocalCurrency());t.curPrice=i.util.formatProductPrice(t.curPrice,l),t.orgPrice=i.util.formatProductPrice(t.orgPrice,l)}return e}function n(){e("#cells img").each(function(){e(this).click(function(){g?e("#cells").viewer("update"):g=e("#cells").viewer({url:"data-original",toolbar:{zoomIn:!1,zoomOut:!1,oneToOne:!1,reset:!1,prev:{show:!0,size:"large"},play:!1,next:{show:!0,size:"large"},rotateLeft:!1,rotateRight:!1,flipHorizontal:!1,flipVertical:!1},navbar:!1,movable:!0,title:!1,transition:!1,button:!1,hide:function(){e("#wall_buy_wrap").addClass("hide")},show:function(){e("#wall_buy_wrap").removeClass("hide")},view:function(a){var t=r.picData[a.detail.index];e("#wall_buy_btn").attr("href",t.aiHref),t.productName?(e("#wall_product_name").html(t.productName),e("#wall_product_price").html(t.curPrice),e("#wall_product_del_price").html(t.orgPrice)):(e("#wall_product_name").html(""),e("#wall_product_price").html(""),e("#wall_product_del_price").html(""))}})})})}var u={amount:0,curPage:1,pageSize:0,totalPage:0},g=null;!function(){o()}()});